=== 日志开始于 2025-04-05 16:22:58 ===
[2025-04-05 16:22:58] [INFO] 日志级别设置为: DEBUG
[2025-04-05 16:22:58] [INFO] 已启用详细日志模式
[2025-04-05 16:23:02] [INFO] 配置文件路径: config.yaml
[2025-04-05 16:23:02] [DEBUG] 完整配置: {'system': {'log_level': 'INFO', 'device': 'cuda', 'seed': 42}, 'data': {'input_file': './data/original_data/', 'model_output_dir': './model/pkl/', 'data_output_dir': './data/processed_data/', 'val_path': './data/original_data/val.jsonl'}, 'paths': {'data_root': './data/data', 'model_root': './models/', 'cache_dir': './cache/', 'log_dir': './logs/'}, 'modules': {'active': {'retrieval': 'hybrid', 'generator': 'qwen', 'evaluator': 'eval.metrics_calculation', 'ui': 'webui', 'process': 'process.process'}}, 'retrieval': {'top_k': 5, 'use_plain_text': True, 'max_words': 2, 'text_retrieval': {'method': 'hybrid', 'hybrid_alpha': 0.7}, 'deep_retrieval': {'model': 'bert-base-uncased', 'pooling': 'mean'}, 'hybrid': {'weights': {'bm25': 0.4, 'dpr': 0.6}, 'fusion_method': 'weighted_sum'}}, 'generation': {'qwen': {'model_path': 'Qwen/Qwen2.5-7B-Instruct', 'api_mode': True, 'system_prompt': 'Answer the question based on the context below. \nKeep the answer concise and factual.\n'}}, 'webui': {'port': 8080, 'presentation': True}, 'evaluation': {'default_method': 'text', 'auto_select': False, 'metrics': {'calculate': True, 'types': ['precision', 'recall', 'mrr']}, 'output': {'text': './data/evaluation/text_evaluation_results.jsonl', 'deep_embedding': './data/evaluation/deep_embedding_evaluation_results.jsonl', 'hybrid': './data/evaluation/hybrid_evaluation_results.jsonl'}}, 'debug': {'train_mode': False, 'evaluate_mode': False, 'process_mode': False}}
[2025-04-05 16:23:02] [INFO] 运行模式: process_mode=False, evaluate_mode=False, train_mode=False
[2025-04-05 16:23:02] [INFO] 启动Web UI模式...
[2025-04-05 16:23:02] [INFO] 成功导入WebUI模块...
[2025-04-05 16:23:02] [INFO] 正在下载NLTK punkt资源，这可能需要一点时间...
[2025-04-05 16:23:09] [INFO] NLTK punkt资源下载完成
[2025-04-05 16:23:09] [INFO] 成功导入ManualQuerySearch...
[2025-04-05 16:24:47] [INFO] 成功初始化ManualQuerySearch，当前参数为：{'method': 'hybrid', 'hybrid_alpha': 0.7, 'top_k': 5, 'max_words': 2, 'doc_path': './data/processed_data/processed_plain.jsonl', 'bm25_path': './model/pkl/plain_bm25.pkl', 'tfidf_path': './model/pkl/plain_tfidf.pkl'}
[2025-04-05 16:24:47] [DEBUG] 搜索器初始化完成，开始构建UI...
[2025-04-05 16:24:47] [INFO] 开始构建WebUI界面...
[2025-04-05 16:24:47] [DEBUG] 开始构建Gradio界面...
[2025-04-05 16:24:47] [DEBUG] Gradio界面构建完成
[2025-04-05 16:24:47] [INFO] WebUI界面构建完成，尝试在端口8080上启动服务...
[2025-04-05 16:24:50] [ERROR] 启动WebUI服务时出错: Couldn’t start the app because 'http://localhost:8080/gradio_api/startup-events' failed (code 500). Check your network or proxy settings to ensure localhost is accessible.
