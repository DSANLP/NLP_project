=== 日志开始于 2025-04-05 16:35:39 ===
[2025-04-05 16:35:39] [INFO] 日志级别设置为: DEBUG
[2025-04-05 16:35:39] [INFO] 已启用详细日志模式
[2025-04-05 16:35:42] [INFO] 配置文件路径: config.yaml
[2025-04-05 16:35:42] [DEBUG] 完整配置: {'system': {'log_level': 'INFO', 'device': 'cuda', 'seed': 42}, 'data': {'input_file': './data/original_data/', 'model_output_dir': './model/pkl/', 'data_output_dir': './data/processed_data/', 'val_path': './data/original_data/val.jsonl'}, 'paths': {'data_root': './data/data', 'model_root': './models/', 'cache_dir': './cache/', 'log_dir': './logs/'}, 'modules': {'active': {'retrieval': 'hybrid', 'generator': 'qwen', 'evaluator': 'eval.metrics_calculation', 'ui': 'webui', 'process': 'process.process'}}, 'retrieval': {'top_k': 5, 'use_plain_text': True, 'max_words': 2, 'text_retrieval': {'method': 'hybrid', 'hybrid_alpha': 0.7}, 'deep_retrieval': {'model': 'bert-base-uncased', 'pooling': 'mean'}, 'hybrid': {'weights': {'bm25': 0.4, 'dpr': 0.6}, 'fusion_method': 'weighted_sum'}}, 'generation': {'qwen': {'model_path': 'Qwen/Qwen2.5-7B-Instruct', 'api_mode': True, 'system_prompt': 'Answer the question based on the context below. \nKeep the answer concise and factual.\n'}}, 'webui': {'port': 8080, 'presentation': True}, 'evaluation': {'default_method': 'text', 'auto_select': False, 'metrics': {'calculate': True, 'types': ['precision', 'recall', 'mrr']}, 'output': {'text': './data/evaluation/text_evaluation_results.jsonl', 'deep_embedding': './data/evaluation/deep_embedding_evaluation_results.jsonl', 'hybrid': './data/evaluation/hybrid_evaluation_results.jsonl'}}, 'debug': {'train_mode': False, 'evaluate_mode': False, 'process_mode': False}}
[2025-04-05 16:35:42] [INFO] 运行模式: process_mode=False, evaluate_mode=False, train_mode=False
[2025-04-05 16:35:42] [INFO] 启动Web UI模式...
[2025-04-05 16:35:42] [INFO] 成功导入WebUI模块...
[2025-04-05 16:35:42] [INFO] 正在启动WebUI，这可能需要一些时间...
[2025-04-05 16:35:42] [INFO] 文档路径: ./data/processed_data/processed_plain.jsonl
[2025-04-05 16:35:42] [INFO] BM25模型路径: ./model/pkl/plain_bm25.pkl
[2025-04-05 16:35:42] [INFO] TF-IDF模型路径: ./model/pkl/plain_tfidf.pkl
[2025-04-05 16:35:42] [DEBUG] 已存在NLTK punkt资源
[2025-04-05 16:35:42] [INFO] 成功导入ManualQuerySearch...
[2025-04-05 16:35:42] [INFO] 开始初始化搜索器...
[2025-04-05 16:35:42] [INFO] 正在加载文档，这可能需要一点时间...
[2025-04-05 16:35:42] [INFO] 正在加载BM25模型，这可能需要一点时间...
[2025-04-05 16:35:42] [INFO] 如果是hybrid模式，还将加载TF-IDF模型...
[2025-04-05 16:35:42] [INFO] 正在加载文档: ./data/processed_data/processed_plain.jsonl
[2025-04-05 16:35:43] [INFO] 成功加载 12138 个文档
[2025-04-05 16:35:43] [INFO] 正在加载BM25模型: ./model/pkl/plain_bm25.pkl
[2025-04-05 16:35:44] [INFO] BM25模型加载成功
[2025-04-05 16:35:44] [INFO] 正在加载TF-IDF模型: ./model/pkl/plain_tfidf.pkl
[2025-04-05 16:35:44] [INFO] TF-IDF向量器加载成功，将在首次查询时生成矩阵
[2025-04-05 16:35:44] [INFO] ManualQuerySearch初始化完成，使用方法: hybrid
[2025-04-05 16:35:44] [INFO] 成功初始化ManualQuerySearch，当前参数为：{'method': 'hybrid', 'hybrid_alpha': 0.7, 'top_k': 5, 'max_words': 2, 'doc_path': './data/processed_data/processed_plain.jsonl', 'bm25_path': './model/pkl/plain_bm25.pkl', 'tfidf_path': './model/pkl/plain_tfidf.pkl'}
[2025-04-05 16:35:44] [DEBUG] 搜索器初始化完成，开始构建UI...
[2025-04-05 16:35:44] [INFO] 开始构建WebUI界面...
[2025-04-05 16:35:44] [DEBUG] 开始构建Gradio界面...
[2025-04-05 16:35:44] [DEBUG] Gradio界面构建完成
[2025-04-05 16:35:44] [INFO] WebUI界面构建完成，尝试在端口8080上启动服务...
[2025-04-05 16:35:44] [INFO] WebUI服务已启动，可以通过 http://localhost:8080 访问
[2025-04-05 16:35:48] [INFO] 用户提交查询: 'which place is known as tea garden of india', 使用检索方法: bm25
[2025-04-05 16:35:48] [DEBUG] 处理查询: 'which place is known as tea garden of india'
[2025-04-05 16:35:48] [INFO] 正在生成TF-IDF矩阵，这可能需要一点时间...
[2025-04-05 16:37:24] [INFO] TF-IDF矩阵生成完成，形状: (12138, 253688)
[2025-04-05 16:37:24] [DEBUG] 使用 hybrid 方法检索与查询相关的文档
[2025-04-05 16:37:25] [DEBUG] 检索结果: 找到 5 个相关文档
